(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{27:function(e,t,a){e.exports=a(52)},33:function(e,t,a){},34:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(23),l=a.n(c),s=a(13),i=a(8),o=a.n(i),u=a(12),m=a(18),d=a(2),p=a(3),h=a(5),v=a(4),b=a(14),f=a(6),g=(a(33),a(16)),E=a(15),y=a(26),C=(a(34),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.cartQnt;return r.a.createElement("header",null,r.a.createElement(b.c,{to:"/"},r.a.createElement(y.a,{className:"home-icon"})),r.a.createElement("h1",null,"Front-end Online Store"),r.a.createElement(b.b,{to:"/cart",className:"cart","data-testid":"shopping-cart-button"},r.a.createElement(E.a,{className:"cart-icon"}),r.a.createElement("span",{"data-testid":"shopping-cart-size",className:"cart-qnt"},e)))}}]),a}(n.Component)),N=(a(43),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).loadCart=function(){var t=JSON.parse(localStorage.getItem("cartItems"));t&&e.setState({emptyCart:!t.length})},e.state={emptyCart:!0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.loadCart()}},{key:"render",value:function(){var e=this.state.emptyCart,t=this.props,a=t.handleQuantities,n=t.handleRemoveItem,c=t.productsAndQuantities,l=t.cartQnt;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{cartQnt:l}),e||!c.length?r.a.createElement("p",{"data-testid":"shopping-cart-empty-message",className:"empty-message"},"Seu carrinho est\xe1 vazio"):r.a.createElement("div",{className:"full-cart"},r.a.createElement("h3",null,"Carrinho"),c.map((function(e){var t=e.productName,c=e.quantity,l=e.btnDisabled,s=e.productImg,i=e.price;return r.a.createElement("div",{className:"cart-item",key:t},r.a.createElement("button",{type:"button",name:t,onClick:n,className:"trash-icon"},r.a.createElement(E.c,null)),r.a.createElement("div",{className:"info-quant"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:s,alt:t,className:"prod-img"})),r.a.createElement("div",{className:"product-info"},r.a.createElement("p",{"data-testid":"shopping-cart-product-name",className:"product-name"},t),r.a.createElement("div",{className:"quantities-board"},r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",name:t,value:"decrease",onClick:a,className:"quantity-icon"},r.a.createElement(g.b,null)),r.a.createElement("div",{"data-testid":"shopping-cart-product-quantity",className:"quantity-text"},c),r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",name:t,value:"increase",onClick:a,disabled:l,className:"quantity-icon"},r.a.createElement(g.c,null)))),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("p",{"data-testid":"shopping-cart-product-name",className:"product-price"},"R$".concat((i*c).toLocaleString("pt-br")))))})),r.a.createElement(b.b,{to:"/checkout","data-testid":"checkout-products",className:"checkout-link"},"Checkout")))}}]),a}(n.Component)),O=(a(44),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),e.setState({submitted:!0})},e.state={fullname:"",email:"",cpf:"",phone:"",cep:"",address:"",submitted:!1},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.cartItems,t=this.state,a=t.fullname,n=t.email,c=t.cpf,l=t.phone,s=t.cep,i=t.address,o=t.submitted;return r.a.createElement("div",null,r.a.createElement(C,{cartQnt:e.reduce((function(e,t){return e+t.quantity}),0)}),o?r.a.createElement("h1",{className:"purchase-success"},"".concat(a,", parab\xe9ns pela sua compra!")):r.a.createElement("div",null,!!e.length&&r.a.createElement("div",{className:"cart-list"},r.a.createElement("h2",null,"Produtos"),r.a.createElement("div",null,e.map((function(e){var t=e.productName,a=e.price,n=e.quantity,c=e.productImg;return r.a.createElement("div",{className:"cart-item checkout-item",key:t},r.a.createElement("div",{className:"full-product"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:c,alt:t,className:"prod-img"})),r.a.createElement("div",{className:"product-name"},t)),r.a.createElement("div",{className:"product-price"},"R$".concat((a*n).toLocaleString("pt-br"))))}))),r.a.createElement("h2",{className:"total-price"},"Total:"," ",r.a.createElement("span",null,"R$".concat(e.reduce((function(e,t){return e+t.price*t.quantity}),0).toLocaleString("pt-br"))))),r.a.createElement("form",{className:"checkout-form",onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Dados Pessoais"),r.a.createElement("label",{htmlFor:"fullname",className:"input-label"},"Nome Completo",r.a.createElement("input",{"data-testid":"checkout-fullname",type:"text",name:"fullname",value:a,placeholder:"Nome Completo",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"email",className:"input-label"},"E-mail",r.a.createElement("input",{"data-testid":"checkout-email",type:"email",name:"email",value:n,placeholder:"E-mail",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"cpf",className:"input-label"},"CPF",r.a.createElement("input",{"data-testid":"checkout-cpf",type:"text",name:"cpf",value:c,placeholder:"CPF",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"phone",className:"input-label"},"Telefone",r.a.createElement("input",{"data-testid":"checkout-phone",type:"tel",name:"phone",value:l,placeholder:"Telefone",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"cep",className:"input-label"},"CEP",r.a.createElement("input",{"data-testid":"checkout-cep",type:"text",name:"cep",value:s,placeholder:"CEP",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"address",className:"input-label"},"Endere\xe7o Completo",r.a.createElement("input",{"data-testid":"checkout-address",type:"text",name:"address",value:i,placeholder:"Endere\xe7o",onChange:this.handleChange})),r.a.createElement("button",{className:"purchase-btn",type:"submit"},"Comprar"))))}}]),a}(n.Component));function j(){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.mercadolibre.com/sites/MLB/categories",e.next=3,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(o.a.mark((function e(t,a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",n=t&&a?"https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a):t?"https://api.mercadolibre.com/sites/MLB/search?category=".concat(t):"https://api.mercadolibre.com/sites/MLB/search?q=".concat(a),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.mercadolibre.com/items/".concat(t),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).fetchCategories=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:a=t.sent,e.setState({categoriesList:a});case 4:case"end":return t.stop()}}),t)}))),e.state={categoriesList:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchCategories()}},{key:"render",value:function(){var e=this.state.categoriesList,t=this.props.handleCatClick;return r.a.createElement("aside",{className:"categories-cont"},r.a.createElement("p",{className:"categories-header"},"Categorias"),r.a.createElement("div",{className:"all-categories"},e.map((function(e){var a=e.id,n=e.name;return r.a.createElement("button",{type:"button",key:a,id:a,"data-testid":"category",onClick:t},n)}))))}}]),a}(n.Component),x=(a(45),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"free-shipping"},r.a.createElement(E.d,null),r.a.createElement("div",{"data-testid":"free-shipping"},"Frete Gr\xe1tis"))}}]),a}(n.Component)),A=(a(46),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleCard=function(){var t=e.props,a=t.history,n=t.btnId;a.push("/product/".concat(n))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.product,a=e.handleAddToCart,n=e.btnId,c=t.title,l=t.thumbnail,s=t.price,i=t.shipping.free_shipping;return r.a.createElement("div",{"data-testid":"product",className:"product-card"},r.a.createElement(b.b,{to:"/product/".concat(n),className:"prod-link"},r.a.createElement("img",{src:l,alt:c}),r.a.createElement("div",{className:"title"},c)),r.a.createElement("div",null,"R$".concat(s.toLocaleString("pt-br"))),i&&r.a.createElement(x,null),r.a.createElement("button",{"data-testid":"product-add-to-cart",type:"button",id:n,onClick:a},"Adicionar ao carrinho"),r.a.createElement("button",{type:"button","data-testid":"product-detail-link",onClick:this.handleCard},"Detalhes"))}}]),a}(n.Component)),D=(a(47),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.history,a=e.search,n=e.products,c=e.handleChange,l=e.handleCatClick,s=e.handleAddToCart,i=e.getProducts,o=e.cartQnt;return r.a.createElement("div",{className:"home-page"},r.a.createElement(C,{cartQnt:o}),r.a.createElement("main",null,r.a.createElement(q,{handleCatClick:l}),r.a.createElement("section",{className:"main-products"},r.a.createElement("div",{className:"search-block"},r.a.createElement("input",{type:"text",onChange:c,name:"search",value:a,"data-testid":"query-input"}),r.a.createElement("button",{type:"button","data-testid":"query-button",onClick:i},r.a.createElement(E.b,null))),!n.length&&r.a.createElement("p",{"data-testid":"home-initial-message",className:"initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement("div",{className:"products-list"},n.map((function(e){return r.a.createElement(A,{key:e.id,btnId:e.id,product:e,handleAddToCart:s,history:t})}))))))}}]),a}(n.Component)),F=(a(48),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.productId,a=e.reviews;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"reviews-title"},"Avalia\xe7\xf5es"),a.filter((function(e){return e.id===t})).map((function(e,t){var a=e.email,n=e.stars,c=e.message;return r.a.createElement("div",{className:"reviews",key:t},r.a.createElement("div",{className:"rev-email"},a),r.a.createElement("div",{className:"stars-div"},Array(Number(n)).fill().map((function(e,t){return r.a.createElement(g.a,{key:t})}))),r.a.createElement("div",{className:"message"},c))})))}}]),a}(n.Component)),R=(a(49),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.productId,r=a.handleSendReview,c=e.state;r({id:n,email:c.email,stars:c.stars,message:c.message}),e.setState({email:"",stars:"",message:""})},e.state={email:"",stars:"",message:""},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.stars,c=t.message;return r.a.createElement("div",{className:"send-review"},r.a.createElement("h3",null,"Avalie o produto"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"review-form"},r.a.createElement("input",{"data-testid":"product-detail-email",type:"email",name:"email",placeholder:"Email",value:a,onChange:this.handleChange,className:"email"}),r.a.createElement("div",{className:"stars-radio-div"},Object(s.a)(Array(5).keys()).map((function(e){return e+1})).map((function(t){return r.a.createElement("label",{key:t,htmlFor:"".concat(t,"-stars")},r.a.createElement("input",{"data-testid":"".concat(t,"-rating"),type:"radio",className:"star-radio",id:"".concat(t,"-stars"),name:"stars",value:t,checked:n===String(t),onChange:e.handleChange}),t<=Number(n)?r.a.createElement(g.a,null):r.a.createElement(g.d,null))}))),r.a.createElement("textarea",{"data-testid":"product-detail-evaluation",name:"message",rows:5,placeholder:"Mensagem (opcional)",value:c,onChange:this.handleChange}),r.a.createElement("button",{"data-testid":"submit-review-btn",type:"submit"},"Avaliar")))}}]),a}(n.Component)),T=(a(50),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleSendReview=function(t){var a=JSON.parse(localStorage.getItem("reviews")),n=[].concat(Object(s.a)(a),[t]);localStorage.setItem("reviews",JSON.stringify(n)),e.setState({reviews:n})},localStorage.getItem("reviews")||localStorage.setItem("reviews","[]"),e.state={product:{},reviews:JSON.parse(localStorage.getItem("reviews"))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.t0=this,e.next=4,w(t);case 4:e.t1=e.sent,e.t2={product:e.t1},e.t0.setState.call(e.t0,e.t2);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.handleAddToCart,a=e.cartQnt,n=this.state,c=n.reviews,l=n.product,s=n.product,i=s.title,o=s.thumbnail,u=s.price,m=s.attributes,d=s.shipping,p=void 0===d?{free_shipping:!1}:d,h=s.id,v=p.free_shipping;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{cartQnt:a}),Object.keys(l).length?r.a.createElement("div",{className:"product-page"},r.a.createElement("div",{className:"product-title"},r.a.createElement("span",{"data-testid":"product-detail-name"},i),r.a.createElement("img",{src:o,alt:i})),r.a.createElement("span",null,"R$".concat(u.toLocaleString("pt-br"))),v&&r.a.createElement(x,null),r.a.createElement("ul",null,m.map((function(e){var t=e.id,a=e.name,n=e.value_name;return r.a.createElement("li",{key:t},"".concat(a,": ").concat(n))}))),r.a.createElement("button",{"data-testid":"product-detail-add-to-cart",type:"button",id:h,onClick:t},"Adicionar ao carrinho"),r.a.createElement(R,{handleSendReview:this.handleSendReview,productId:h}),r.a.createElement(F,{reviews:c,productId:h})):r.a.createElement("div",{className:"product-page"}))}}]),a}(n.Component)),L=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).getCartQuant=function(){var t=e.state.cartItems.reduce((function(e,t){return e+t.quantity}),0);e.setState({cartQnt:t})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e.getProducts=Object(u.a)(o.a.mark((function t(){var a,n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.categoryId,r=a.search,t.next=3,I(n,r);case 3:c=t.sent,e.setState({products:c.results});case 5:case"end":return t.stop()}}),t)}))),e.handleCatClick=function(t){var a=t.target.id;e.setState({categoryId:a},e.getProducts)},e.handleAddToCart=function(t){var a=t.target.id,n=e.state.products.find((function(e){return e.id===a})),r={productImg:n.thumbnail,productName:n.title,price:n.price,quantity:1,avlQnt:n.available_quantity,btnDisabled:!1};e.setState((function(e){return{cartItems:[].concat(Object(s.a)(e.cartItems),[r])}}),e.productCount)},e.productCount=function(){var t=e.state.cartItems.reduce((function(e,t){var a=t.productName,n=t.avlQnt,r=t.price,c=t.quantity,l=t.productImg;return e[a]?e[a].count+=c:e[a]={count:c,avlQnt:n,price:r,productImg:l},e}),{}),a=Object.keys(t),n=Object.values(t),r=a.map((function(e,t){return{productName:e,productImg:n[t].productImg,quantity:n[t].count,avlQnt:n[t].avlQnt,price:n[t].price,btnDisabled:n[t].count===n[t].avlQnt}}));localStorage.setItem("cartItems",JSON.stringify(r)),e.setState({cartItems:r},e.getCartQuant)},e.handleQuantities=function(t){var a,n=t.currentTarget,r=n.value,c=n.name;a=e.state.cartItems.reduce((function(a,n){var l=n.productName,i=n.quantity,o=n.avlQnt,u=n.productImg,m=n.price;return l===c?"increase"===r?a=[].concat(Object(s.a)(a),[{productName:l,productImg:u,quantity:i+1,price:m,avlQnt:o,btnDisabled:i+1===o}]):1===i?e.handleRemoveItem(t):a=[].concat(Object(s.a)(a),[{productName:l,productImg:u,quantity:i-1,avlQnt:o,price:m,btnDisabled:i-1===o}]):a=[].concat(Object(s.a)(a),[{productName:l,productImg:u,quantity:i,avlQnt:o,price:m,btnDisabled:i===o}]),a}),[]),e.setState({cartItems:a},e.productCount)},e.handleRemoveItem=function(t){var a=t.currentTarget.name,n=e.state.cartItems.reduce((function(e,t){return t.productName!==a?[].concat(Object(s.a)(e),[t]):e}),[]);e.setState({cartItems:n},e.productCount)},e.state={search:"",products:[],categoryId:"",cartItems:[],cartQnt:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("cartItems"));e&&this.setState({cartItems:e},this.productCount)}},{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.products,c=t.cartItems,l=t.cartQnt;return r.a.createElement(b.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(D,Object.assign({},t,{handleChange:e.handleChange,handleCatClick:e.handleCatClick,handleAddToCart:e.handleAddToCart,getProducts:e.getProducts,search:a,products:n,cartQnt:l}))}}),r.a.createElement(f.a,{path:"/cart",render:function(t){return r.a.createElement(N,Object.assign({},t,{productsAndQuantities:c,handleQuantities:e.handleQuantities,handleRemoveItem:e.handleRemoveItem,cartQnt:l}))}}),r.a.createElement(f.a,{path:"/product/:id",render:function(t){return r.a.createElement(T,Object.assign({},t,{handleAddToCart:e.handleAddToCart,cartQnt:l}))}}),r.a.createElement(f.a,{path:"/checkout",render:function(e){return r.a.createElement(O,Object.assign({},e,{cartItems:c}))}})))}}]),a}(n.Component);a(51);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.a09eb4e4.chunk.js.map